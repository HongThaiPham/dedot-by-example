"use client";
import { useDedotProvider } from "@/components/DedotProvider";
import { Button } from "@/components/ui/button";
import useDeployContract from "@/hooks/useDeployContract";
import { ISubstrateClient } from "dedot";
import {
  Contract,
  ContractDeployer,
  ContractMetadata,
  parseRawMetadata,
} from "dedot/contracts";
import { stringToHex } from "dedot/utils";
import { useState } from "react";
import { toast } from "sonner";
const WASM =
  "0x0061736d01000000014e0d60037f7f7f017f60027f7f017f60027f7f0060037f7f7f0060017f0060047f7f7f7f0060047f7f7f7f017f60057f7f7f7f7f0060000060027e7f006000017f60057f7f7f7f7f017f60017f017f02990108057365616c310b6765745f73746f726167650006057365616c3005696e7075740002057365616c320b7365745f73746f726167650006057365616c300d64656275675f6d6573736167650001057365616c300b7365616c5f72657475726e0003057365616c300663616c6c65720002057365616c301176616c75655f7472616e73666572726564000203656e76066d656d6f72790201021003464500000000000002020309020405070a010104030401020302010b0203020102040303020804080305020c020100000101020402010107060506070201010500020005010101040501700115150616037f01418080040b7f0041c099050b7f0041b699050b0711020463616c6c002a066465706c6f79002c091a010041010b1443421b1617364b1a1f1a161a343532391a47494a0ace5b452b01017f037f2002200346047f200005200020036a200120036a2d00003a0000200341016a21030c010b0b0b6f01017f0240200020014d04402000210303402002450d02200320012d00003a0000200341016a2103200141016a2101200241016b21020c000b000b200041016b2103200141016b210103402002450d01200220036a200120026a2d00003a0000200241016b21020c000b000b20000b2501017f037f2002200346047f200005200020036a20013a0000200341016a21030c010b0b0b3f01027f0340200245044041000f0b200241016b210220012d0000210320002d00002104200141016a2101200041016a210020032004460d000b200420036b0b3f01017f20002d00042103200041003a00042003450440200028020020012002100c0f0b200120002d00053a00002000280200200141016a200241016b100c0b3d01027f2000280204220320024922044504402001200220002802002201200241ec980410402000200320026b3602042000200120026a3602000b20040b8a0101047f230041206b22022400200241186a22034200370300200241106a22044200370300200241086a22054200370300200242003703002000027f200120024120100c45044020002002290300370001200041196a2003290300370000200041116a2004290300370000200041096a200529030037000041000c010b41010b3a0000200241206a24000b0a00200120004120100f0b5601037f02402000280208220420026a220320044f04402003200028020422054b0d01200028020020046a200320046b2001200241d896041040200020033602080f0b41b896041018000b2003200541c896041028000b2601017f230041106b22022400200220003703082001200241086a4108100f200241106a24000b2601017f230041106b220224002002200036020c20012002410c6a4104100f200241106a24000bb80101027f230041406a2201240020014180800136021441b69904200141146a22021005200141086a200128021441b69904418080011013200120012903083702382002200141386a100d20012d00140440200141103a001441af800441c10020024180800441dc81041014000b20002001290016370001200041096a2001411e6a290000370000200041116a200141266a290000370000200041186a2001412d6a290000370000200020012d00153a0000200141406b24000b2300200120034b04402001200341f497041028000b20002001360204200020023602000b7901017f230041406a220524002005200136020c2005200036020820052003360214200520023602102005413c6a41013602002005410236021c2005418c8c0436021820054202370224200541023602342005200541306a3602202005200541106a3602382005200541086a360230200541186a2004101c000b6402037f027e230041206b22002400200041106a22014200370300200042003703082000411036021c200041086a22022000411c6a10062000200028021c2002411010132001290300210320002903082104200041206a2400410541042003200484501b0b1800200128021441c486044105200128021828020c1100000b3100200128021420002802002d0000410274220041f485046a280200200041b485046a280200200128021828020c1100000b4301017f230041206b220124002001410036021020014101360204200142043702082001412b36021c200141e28a043602182001200141186a36020020012000101c000b3d01017f230041106b22032400200341046a2002103720032802082001200210071a200041086a200236020020002003290204370200200341106a24000b0300010b810101017f230041306b220224002002410136020c200241a494043602082002420137021420024102360224200220002d0000410274220041fc98046a28020036022c20022000419099046a2802003602282002200241206a3602102002200241286a36022020012802142001280218200241086a10332100200241306a240020000b3a01017f230041206b22022400200241013b011c2002200136021820022000360214200241a88b043602102002410136020c2002410c6a1038000b7c01017f230041106b2203240002402001413f4d044020022001410274101e0c010b200141ffff004d0440200320014102744101723b010e20022003410e6a4102100f0c010b200141ffffffff034d04402001410274410272200210110c010b20024103101e2001200210110b200220002001100f200341106a24000b940101027f20002802082202200028020422034904402000200241016a360208200028020020026a20013a00000f0b230041306b2200240020002003360204200020023602002000412c6a41063602002000410236020c200041f88b0436020820004202370214200041063602242000200041206a360210200020003602282000200041046a360220200041086a41e89604101c000b8c0101027f230041106b22022400027f024002400240410220002d000041106b41ff01712203200341024f1b41016b0e020102000b200220003602082001419080044106200241086a410410200c020b200128021441968004410e200128021828020c1100000c010b2002200036020c200141a48004410b2002410c6a410510200b2100200241106a240020000b9c0201047f230041406a2205240041012107024020002802142206200120022000280218220228020c22011100000d000240200028021c2208410471450440200641ba8c04410120011100000d022003200020041101000d0220002802142106200028021828020c21010c010b200641bb8c04410220011100000d01200541013a001b200520023602102005200636020c200520083602382005419c8c04360234200520002d00203a003c2005200028021036022c200520002902083702242005200029020037021c20052005411b6a36021420052005410c6a36023020032005411c6a20041101000d01200528023041b88c044102200528023428020c1100000d010b200641e08a044101200111000021070b200541406b240020070ba70701097f230041106b22032400200341003a00040240024002402001200341046a4101100c0d000240024002400240024020032d0004220241037141016b0e03010203000b200241027621020c030b200320023a0009200341013a000820032001360204200341003b0100200341046a20034102100b0d0320032f0100220241ff014d0d03200241027621020c020b200320023a0009200341013a00082003200136020420034100360200200341046a20034104100b0d022003280200220241808004490d02200241027621020c010b200241044f0d01200341003602042001200341046a4104100c0d0120032802042202418080808004490d010b20012802042002490d00200341046a2002410110222003280208210720032802044504402001200328020c22042002100c200741808080807846720d012002450d02200241076b22014100200120024d1b2109200441036a417c7120046b210a41002101034002400240024002400240024002400240024002400240200120046a2d0000220641187441187522084100480440200641a091046a2d000041026b0e03030102080b200a20016b4103710d09200120094f0d080340200120046a220641046a280200200628020072418081828478710d092009200141086a22014b0d000b0c080b200141016a220520024f0d06200420056a2c000021050240200641e001470440200641ed01460d012008411f6a41ff0171410c490d042008417e71416e470d0820054140480d050c080b200541607141a07f460d040c070b2005419f7f4a0d060c030b200141016a220520024f0d05200420056a2c000021050240024002400240200641f0016b0e050100000002000b2008410f6a41ff017141024b0d0820054140480d020c080b200541f0006a41ff01714130490d010c070b2005418f7f4a0d060b200141026a220620024f0d05200420066a2c000041bf7f4a0d05200141036a220120024f0d05200120046a2c000041bf7f4c0d040c050b200141016a22012002490d020c040b200541404e0d030b200141026a220120024f0d02200120046a2c000041bf7f4c0d010c020b200120046a2c000041bf7f4a0d010b200141016a21010c030b20004180808080783602000c070b200120024f0d010340200120046a2c00004100480d022002200141016a2201470d000b0c050b200141016a21010b20012002490d000b0c020b2007200328020c1023000b20004180808080783602000c010b2000200236020820002007ad2004ad422086843702000b200341106a24000b8c0101027f230041106b220324002000027f2001450440200042808080801037020441000c010b0240200141004e2204450440200041003602040c010b027f2002450440200341086a2001103120032802080c010b200110300b22020440200020023602082000200136020441000c020b20002001360208200020043602040b41010b360200200341106a24000bb801002000450440230041206b22002400200041003602182000410136020c200041f8860436020820004204370210200041086a41f08704101c000b230041306b220024002000200136020c200041023602142000419089043602102000420137021c2000410636022c2000200041286a36021820002000410c6a360228230041206b22012400200141003b011c200141a089043602182001200041106a360214200141a88b043602102001410136020c2001410c6a1038000b110020014100360000200020014104100c0b5b01027f230041106b22022400200242808001370208200241b69904360204200241046a22032001047f20034101101e41010541000b101e200228020c2201418180014f044020014180800141ec81041028000b200020011029000bc00102057f017e230041306b2201240020014100360220200142808001370228200141b699043602244100200141246a2202101120012001290224370218200141106a200141186a2203200128022c10272001280214210420012802102105200129021821062001410036022c2001200637022420002002100e200028022c20002802302002101d20002903202002101020012001290224370218200141086a2003200128022c1027200520042001280208200128020c10021a200141306a24000b7201027f230041206b220324002002200128020422044b0440200341003602182003410136020c200341b0950436020820034204370210200341086a41f89604101c000b2001200420026b36020420012001280200220120026a3602002000200236020420002001360200200341206a24000b6801017f230041306b2203240020032001360204200320003602002003412c6a41063602002003410236020c200341b88e0436020820034202370214200341063602242003200341206a3602102003200341046a36022820032003360220200341086a2002101c000b0d00200041b6990420011004000bc00b02087f027e23004180026b220024000240024002400240101541ff0171410546044020004180800136027041b69904200041f0006a22011001200041186a200028027041b69904418080011013200020002903183702e001200041e0016a200110240d03200028027022024118762101200241107621032002410876210402400240200241ff01712202412f470440200241e80147200141b6014772200441ff017141c40147720d06200341ff017141de00460d010c060b200141d90147200441ff01714186014772200341ff017141db0047720d0541808080807821020c010b200041f0006a200041e0016a102120002802702202418080808078460d04200020002800753602302000200041f8006a28000036003320002d007421010b2000412c6a2000280033360000200020013a00282000200236022420002000280230360029200041003602b401200042808001370274200041b699043602704100200041f0006a22021011200020002902703702ac01200041106a200041ac016a20002802781027200028021421032000280210210420002802ac012101200020002802b0012205360270200420032001200210002102200041086a200028027020012005101302400240024020020e0400020201020b200028020821012000200028020c3602bc01200020013602b801200041f0006a2203200041b8016a2204100d024020002d00700d00200041e8016a2205200041fa006a290000370300200041f0016a220620004182016a290000370300200041f7016a220720004189016a290000370000200020002900723703e00120002d0071210120032004102120002802702202418080808078460d002000290274210820004200370370200420034108100c0d00200041c8016a22032005290300370300200041d0016a22042006290300370300200041d7016a22052007290000370000200020002903e0013703c00120002802bc010d002000290370210920004187016a200529000037000020004180016a2004290300370300200041f8006a2003290300370300200020002903c0013703700c050b41818080807821020c030b41808080807821020c020b20004100360280012000410136027420004198820436027020004204370278200041f0006a41a08204101c000b200041043a0070200041f0006a102b000b411021010b02400240024020024180808080786b0e020100020b200041003602f001200041013602e4012000418c85043602e0010c030b200041003602f001200041013602e401200041dc84043602e0010c020b200041d0006a20004187016a290000370000200041c9006a20004180016a290300370000200041c1006a200041f8006a29030037000020002000290370370039200020083702642000200937035820002002360260200020013a00382000280224418080808078470440230041206b2202240020021012200041386a220141186a200241186a290000370000200141106a200241106a290000370000200141086a200241086a29000037000020012002290000370000200141306a200041246a220041086a28020036020020012000290200370228200129032042017c220850044041a485041018000b20012008370320200241206a240020011026410041001025000b200041f0006a2201200041386a220028022c200028023010192001200029020037020c200141146a200041086a2902003702002001411c6a200041106a290200370200200141246a200041186a29020037020020012000290320370330230041106b22002400200042808001370208200041b6990436020402402001280200418080808078470440200041046a22024100101e2001410c6a2002100e200128020420012802082002101d2001290330200210100c010b200041046a22014101101e20014101101e0b200028020c2200418180014f044020004180800141ec81041028000b410020001029000b410141011025000b200042043702e801200041e0016a41b48404101c000b4501017f230041206b2201240020014101360204200141a494043602002001420137020c2001410336021c200120003602182001200141186a360208200141b48404101c000bf10101027f230041d0006b2200240002401015220141ff0171410546044020004180800136020c41b699042000410c6a220110012000200028020c41b699044180800110132000200029030037020c2001200041146a1024450440200028021441ed97f5dc01460d020b410141011025000b200020013a000c2000410c6a102b000b200041186a22011012200041406b41948504410d10192000420037033820011026230041106b22002400200042808001370208200041b69904360204200041046a22014100101e20014100101e200028020c2200418180014f044020004180800141ec81041028000b410020001029000b7201027f230041106b22042400024020022000280200200028020822036b4b0440200441086a200020032002102e20042802082203418180808078470d01200028020821030b200028020420036a2001200210071a2000200220036a360208200441106a24000f0b2003200428020c1023000b940301067f230041206b220524000240200220036a22032002490d00410121044108200128020022024101742206200320032006491b2203200341084d1b2203417f73411f76210702402002450440410021040c010b2005200236021c200520012802043602140b20052004360218200541086a210820032102200541146a2104230041106b22062400027f027f024020070440200241004e0d01410121044100210241040c030b2008410036020441010c010b027f2004280204044020042802082207450440200641086a2002102f20062802082104200628020c0c020b200428020021090240200210302204450440410021040c010b20042009200710071a0b20020c010b2006200210312006280200210420062802040b210720082004410120041b3602042007200220041b21022004450b210441080b20086a200236020020082004360200200641106a2400200528020c21042005280208450440200120033602002001200436020441818080807821040c010b200528021021030b2000200336020420002004360200200541206a24000b2001017f41a499042d00001a20011030210220002001360204200020023602000bb70101027f027f41a899042d0000044041ac99042802000c010b3f00210141ac990441c0990536020041a8990441013a000041b09904200141107436020041c099050b21010240027f4100200020016a22022001490d001a41b099042802002002490440200041ffff036a220241107640002201417f460d022001411074220120024180807c716a22022001490d0241b0990420023602004100200020016a22022001490d011a0b41ac9904200236020020010b0f0b41000b3501017f230041106b22022400200241086a2001102f200228020c21012000200228020836020020002001360204200241106a24000b0c00200041cc8604200110330b980401077f230041406a22032400200341033a003c2003412036022c200341003602382003200136023420032000360230200341003602242003410036021c027f0240024020022802102201450440200228020c22004103742105200041ffffffff01712106200228020421082002280200210720022802082101034020042005460d02200420076a220041046a28020022020440200328023020002802002002200328023428020c1100000d040b200441086a21042001280200210020012802042102200141086a210120002003411c6a2002110100450d000b0c020b200228021422044105742100200441ffffff3f712106200228020c2109200228020821052002280204210820022802002207210403402000450d01200441046a28020022020440200328023020042802002002200328023428020c1100000d030b2003200128021036022c200320012d001c3a003c20032001280218360238200341106a200520012802082001410c6a28020010442003200329031037021c200341086a20052001280200200141046a280200104420032003290308370224200441086a2104200041206b210020012802142102200141206a2101200520024103746a22022802002003411c6a2002280204110100450d000b0c010b200620084904402003280230200720064103746a22002802002000280204200328023428020c1100000d010b41000c010b41010b2101200341406b240020010b0c00200020012002102d41000bbd0201047f230041106b220224000240027f0240024020014180014f04402002410036020c2001418010490d012001418080044f0d0220022001410c7641e001723a000c20022001410676413f71418001723a000d4102210341030c030b200028020822042000280200460440230041106b22032400200341086a200020002802004101102e200328020822054181808080784704402005200328020c1023000b200341106a24000b2000200441016a360208200028020420046a20013a00000c030b2002200141067641c001723a000c4101210341020c010b20022001410676413f71418001723a000e20022001410c76413f71418001723a000d2002200141127641077141f001723a000c4103210341040b210420032002410c6a2205722001413f71418001723a0000200020052004102d0b200241106a240041000bdb05020b7f027e230041406a220324004127210202402000350200220d4290ce00540440200d210e0c010b0340200341196a20026a220041046b200d4290ce0080220e42f0b1037e200d7ca7220441ffff037141e4006e220641017441bd8c046a2f00003b0000200041026b2006419c7f6c20046a41ffff037141017441bd8c046a2f00003b0000200241046b2102200d42ffc1d72f562100200e210d20000d000b0b200ea7220041e3004b0440200241026b2202200341196a6a200ea7220441ffff037141e4006e2200419c7f6c20046a41ffff037141017441bd8c046a2f00003b00000b02402000410a4f0440200241026b2202200341196a6a200041017441bd8c046a2f00003b00000c010b200241016b2202200341196a6a20004130723a00000b41012104200128021c22054101712207412720026b22066a210002402005410471450440410021040c010b41014101103a20006a21000b412b418080c40020071b2107200341196a20026a21080240200128020045044041012102200128021422002001280218220120072004103d0d01200020082006200128020c11000021020c010b2000200128020422094f044041012102200128021422002001280218220120072004103d0d01200020082006200128020c11000021020c010b200541087104402001280210210b2001413036021020012d0020210c41012102200141013a0020200128021422052001280218220a20072004103d0d01200341106a2001200920006b4101103e20032802102200418080c400460d0120032802142104200520082006200a28020c1100000d01200020042005200a103f0d012001200c3a00202001200b360210410021020c010b41012102200341086a2001200920006b4101103e20032802082205418080c400460d00200328020c2109200128021422002001280218220120072004103d0d00200020082006200128020c1100000d002005200920002001103f21020b200341406b240020020b5401027f230041106b22022400200241046a20014100102220022802082101200228020404402001200228020c1023000b200228020c2103200041003602082000200336020420002001360200200241106a24000bb80101017f230041406a220124002001200036020c20014102360214200141bc95043602102001420137021c2001410736022c2001200141286a36021820012001410c6a360228200141306a2200410010372000200141106a10324504402001280234210020012802382101024041b499042d000045044041b599042d00000d010b200020011003410947044041b4990441013a00000b41b5990441013a00000b000b41b0890441332001413f6a41b4860441d08a041014000b2100200042f5fdc4caf2b6f7a15e370308200042e98492899694a9b8867f3703000ba10301067f230041106b220224000240200120006b220141104f04402000200041036a417c71220520006b2200103b2005200120006b2200417c716a2000410371103b6a21042000410276210303402003450d0220022005200341c0012003200341c0014f1b41b88f04103c200228020c21032002280208210520022002280200200228020422002000417c7141909104103c024020022802042200450440410021010c010b2002280200220620004102746a21074100210103404100210003402001200020066a2802002201417f734107762001410676724181828408716a2101200041046a22004110470d000b200641106a22062007470d000b0b200141087641ff81fc0771200141ff81fc07716a418180046c41107620046a2104200228020c2201450d000b2002280208210020014102742103410021010340200120002802002201417f734107762001410676724181828408716a2101200041046a2100200341046b22030d000b200141087641ff81fc0771200141ff81fc07716a418180046c41107620046a21040c010b20002001103b21040b200241106a240020040b2c01017f200104400340200220002c000041bf7f4a6a2102200041016a2100200141016b22010d000b0b20020b6901017f230041206b2205240020022003490440200541003602182005410136020c200541b0950436020820054204370210200541086a2004101c000b20002003360204200020013602002000200220036b36020c2000200120034102746a360208200541206a24000b39000240027f2002418080c40047044041012000200220012802101101000d011a0b20030d0141000b0f0b200020034100200128020c1100000b990101027f024002400240024020012d0020220441016b0e03010200030b200341ff01710d00410021040c020b20022104410021020c010b20024101762104200241016a41017621020b200441016a210420012802102103200128021821052001280214210102400340200441016b2204450d01200120032005280210110100450d000b418080c40021030b20002002360204200020033602000b3201017f027f0340200120012004460d011a200441016a2104200220002003280210110100450d000b200441016b0b2001490b78002001200346044020002002200110071a0f0b230041306b2200240020002003360204200020013602002000412c6a41063602002000410336020c20004188900436020820004202370214200041063602242000200041206a360210200020003602282000200041046a360220200041086a2004101c000bf60101067f2000027f418080c400200128020022022001280204460d001a2001200241016a2205360200024020022d0000220341187441187541004e0d002001200241026a220536020020022d0001413f7121042003411f712106200341df014d0440200641067420047221030c010b2001200241036a220536020020022d0002413f712004410674722104200341f00149044020042006410c747221030c010b2001200241046a2205360200418080c4002006411274418080f0007120022d0003413f71200441067472722203418080c400460d011a0b200120012802082207200520026b6a36020820030b360204200020073602000baa0301067f230041306b22022400200028020421042000280200210302400240200128020022062001280208220072044002402000450d00200128020c21002002410036022c200220033602242002200320046a360228200041016a21000340200041016b22000440200241186a200241246a1041200228021c418080c400470d010c020b0b200241106a200241246a10412002280214418080c400460d000240024020022802102205450d00200420054d04404100210020042005460d010c020b41002100200320056a2c00004140480d010b200321000b2005200420001b21042000200320001b21030b2006450440200128021420032004200128021828020c11000021000c030b200128020422002003200320046a103a22054d0d01200241086a2001200020056b4100103e4101210020022802082205418080c400460d02200228020c210620012802142207200320042001280218220128020c1100000d022005200620072001103f21000c020b200128021420032004200128021828020c11000021000c010b200128021420032004200128021828020c11000021000b200241306a240020000b140020002802002001200028020428020c1101000b4201017f024002400240200241016b0e020102000b410121040c010b200120034103746a2201280200210320012802044521040b20002003360204200020043602000b4901027f230041106b22032400200341086a20021046027f20032802082204044020002004200328020c200128020c1100000c010b20002001200210330b2102200341106a240020020b3001017f024020012802044101470d00200128020c0d00200128020028020421020b20002002360204200041003602000bd20501107f230041406a22032400200341003b013c2003200236023820034100360234200341013a00302003410a36022c2003200236022820034100360224200320023602202003200136021c2003410a3602182000280204210a2000280200210b2000280208210c2003412c6a210d027f024003400240200328021c2107027f024020032802282205200328022022104b0d002003280224220420054b0d0020032d00302200200d6a41016b2d0000220841818284086c210e200041054921110340200420076a210102400240027f0240200520046b220641084f0440024002402001200141036a417c712202460440200641086b210f410021020c010b200341106a20082001200220016b2202104820032802104101460d012002200641086b220f4b0d030b0340200120026a220941046a280200200e732212417f73201241818284086b712009280200200e732209417f73200941818284086b7172418081828478710d03200241086a2202200f4d0d000b0c020b2003280214210141010c020b200320082001200610482003280204210120032802000c010b200341086a2008200120026a200620026b1048200328020c20026a210120032802080b41014604402003200120046a41016a2204360224200020044b200420104b720d022011450d012007200420006b6a21012001200d2000100a0d022003280234210020032004360234200420006b0c050b200320053602240c030b20004104419494041028000b200420054d0d000b0b200341013a003d024020032d003c044020032802382102200328023421000c010b2003280238220220032802342200460d020b200220006b0b2101200c2d00000440200b41b48c044104200a28020c1100000d030b200020076a2100200c2001047f200020016a41016b2d0000410a460541000b3a0000200b20002001200a28020c1100000d0220032d003d450d010b0b41000c010b41010b2100200341406b240020000b5701027f024002402003450440410021030c010b200141ff017121054101210103402005200220046a2d0000460440200421030c030b2003200441016a2204470d000b0b410021010b20002003360204200020013602000b4e01027f20002802042102200028020021030240200028020822002d0000450d00200341b48c044104200228020c110000450d0041010f0b20002001410a463a00002003200120022802101101000b4501027f230041106b22022400200241086a20011046027f20022802082203044020002003200228020c10470c010b2000419c8c04200110330b2101200241106a240020010bf10201067f230041406a22022400200028020021054101210002402001280214220441b88b04410c2001280218220628020c22011100000d00200528020c21032002413c6a4106360200200241346a410636020020024103360214200241908b043602102002420337021c20022003410c6a3602382002200341086a3602302002410236022c200220033602282002200241286a220736021820042006200241106a10450d00200441e18a04410120011100000d00200528020822030440200441b89504410120011100000d01200241386a200341106a290200370300200241306a200341086a29020037030020022003290200370328200420062007104521000c010b200220052802002203200528020428020c11020041002100200229030042f88299bd95eec6c5b97f520d00200229030842edbaadb6cd85d4f5e300520d0041012100200441b89504410120011100000d00200420032802002003280204200111000021000b200241406b240020000b0bee180300418080040ba012080000000100000001000000090000004465636f6465427566666572546f6f536d616c6c52657475726e4572726f7254686520657865637574656420636f6e7472616374206d757374206861766520612063616c6c6572207769746820612076616c6964206163636f756e742069642e2f686f6d652f6c656f2f2e636172676f2f72656769737472792f7372632f696e6465782e6372617465732e696f2d366631376432326262613135303031662f696e6b5f656e762d352e302e302f7372632f656e67696e652f6f6e5f636861696e2f696d706c732e72730000007000010069000000820100000e00000070000100690000001a01000032000000656e636f756e746572656420756e6578706563746564206572726f72fc0001001c0000007000010069000000e3000000170000005375636365737343616c6c65655472617070656443616c6c656552657665727465644b65794e6f74466f756e645f42656c6f7753756273697374656e63655468726573686f6c645472616e736665724661696c65645f456e646f776d656e74546f6f4c6f77436f64654e6f74466f756e644e6f7443616c6c61626c654c6f6767696e6744697361626c656443616c6c52756e74696d654661696c656445636473615265636f766572794661696c6564537232353531395665726966794661696c656458636d457865637574696f6e4661696c656458636d53656e644661696c6564556e6b6e6f776e2f686f6d652f6c656f2f68656c6c6f5f776f726c642f6c69622e7273180201001c000000070000000500000073746f7261676520656e7472792077617320656d707479004402010017000000636f756c64206e6f742070726f7065726c79206465636f64652073746f7261676520656e74727900640201002700000048656c6c6f2c20576f726c6421000000180201001c0000002700000034000000070000000d0000000e0000000b0000001a0000000e000000100000000c0000000b0000000f000000110000001300000013000000120000000d00000007000000300101003701010044010100520101005d010100770101008501010095010100a1010100ac010100bb010100cc010100df010100f201010004020100110201000a00000000000000010000000b0000004572726f720000000c0000000c000000040000000d0000000e0000000f0000006361706163697479206f766572666c6f7700000064030100110000002f686f6d652f6c656f2f2e7275737475702f746f6f6c636861696e732f737461626c652d7838365f36342d756e6b6e6f776e2d6c696e75782d676e752f6c69622f727573746c69622f7372632f727573742f6c6962726172792f616c6c6f632f7372632f7261775f7665632e72730000800301006e00000019000000050000002f686f6d652f6c656f2f2e7275737475702f746f6f6c636861696e732f737461626c652d7838365f36342d756e6b6e6f776e2d6c696e75782d676e752f6c69622f727573746c69622f7372632f727573742f6c6962726172792f616c6c6f632f7372632f616c6c6f632e72736d656d6f727920616c6c6f636174696f6e206f6620206279746573206661696c656400006c04010015000000810401000d000000000401006c000000a40100000d0000006120666f726d617474696e6720747261697420696d706c656d656e746174696f6e2072657475726e656420616e206572726f722f686f6d652f6c656f2f2e7275737475702f746f6f6c636861696e732f737461626c652d7838365f36342d756e6b6e6f776e2d6c696e75782d676e752f6c69622f727573746c69622f7372632f727573742f6c6962726172792f616c6c6f632f7372632f666d742e7273000000e30401006a0000007902000020000000293a63616c6c656420604f7074696f6e3a3a756e77726170282960206f6e206120604e6f6e65602076616c75650000000100000000000000610501000100000061050100010000000a00000000000000010000001000000070616e69636b656420617420696e646578206f7574206f6620626f756e64733a20746865206c656e20697320206275742074686520696e646578206973200000c405010020000000e4050100120000003a20000001000000000000000806010002000000110000000c00000004000000120000001300000014000000202020202c0a28280a3030303130323033303430353036303730383039313031313132313331343135313631373138313932303231323232333234323532363237323832393330333133323333333433353336333733383339343034313432343334343435343634373438343935303531353235333534353535363537353835393630363136323633363436353636363736383639373037313732373337343735373637373738373938303831383238333834383538363837383838393930393139323933393439353936393739383939206f7574206f662072616e676520666f7220736c696365206f66206c656e6774682072616e676520656e6420696e6465782000270701001000000005070100220000002f686f6d652f6c656f2f2e7275737475702f746f6f6c636861696e732f737461626c652d7838365f36342d756e6b6e6f776e2d6c696e75782d676e752f6c69622f727573746c69622f7372632f727573742f6c6962726172792f636f72652f7372632f736c6963652f697465722e72734807010070000000ce05000025000000736f7572636520736c696365206c656e67746820282920646f6573206e6f74206d617463682064657374696e6174696f6e20736c696365206c656e6774682028c807010015000000dd0701002b00000060050100010000002f686f6d652f6c656f2f2e7275737475702f746f6f6c636861696e732f737461626c652d7838365f36342d756e6b6e6f776e2d6c696e75782d676e752f6c69622f727573746c69622f7372632f727573742f6c6962726172792f636f72652f7372632f7374722f636f756e742e727300200801006f0000004f0000003200000001010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010041e292040b330202020202020202020202020202020202020202020202020202020202020303030303030303030303030303030304040404040041a093040b83062f686f6d652f6c656f2f2e7275737475702f746f6f6c636861696e732f737461626c652d7838365f36342d756e6b6e6f776e2d6c696e75782d676e752f6c69622f727573746c69622f7372632f727573742f6c6962726172792f636f72652f7372632f7374722f7061747465726e2e7273000000a009010071000000bf010000370000000100000000000000756e61626c6520746f206465636f64652073656c6563746f72656e636f756e746572656420756e6b6e6f776e2073656c6563746f72756e61626c6520746f206465636f646520696e707574636f756c64206e6f74207265616420696e7075747061696420616e20756e70617961626c65206d6573736167656d6964203e206c656e000000a40a0100090000000a0000000100000000000000b80a0100010000002f686f6d652f6c656f2f2e636172676f2f72656769737472792f7372632f696e6465782e6372617465732e696f2d366631376432326262613135303031662f696e6b5f656e762d352e302e302f7372632f656e67696e652f6f6e5f636861696e2f6275666665722e72730000cc0a01006a0000005c0000003b000000cc0a01006a0000005c00000014000000cc0a01006a0000005d0000000e000000cc0a01006a0000006800000009000000cc0a01006a00000090000000210000002f686f6d652f6c656f2f2e636172676f2f72656769737472792f7372632f696e6465782e6372617465732e696f2d366631376432326262613135303031662f70616c6c65742d636f6e7472616374732d756170692d6e6578742d362e302e332f7372632f686f73742e727300880b01006b0000002d000000170000002f686f6d652f6c656f2f2e636172676f2f72656769737472792f7372632f696e6465782e6372617465732e696f2d366631376432326262613135303031662f7061726974792d7363616c652d636f6465632d332e362e31322f7372632f636f6465632e7273000000040c010065000000770000000e000000190000001c0000001600000014000000190000002c0a0100450a0100610a0100770a01008b0a01";
const CONTRACT_TEST: ContractMetadata = {
  source: {
    hash: "0x63fe8a112e8ef5bbd16375939409e3959967f9edbfbd41d70552b7288e2c3955",
    language: "ink! 5.0.0",
    compiler: "rustc 1.79.0",
    wasm: WASM,
    build_info: {
      build_mode: "Debug",
      cargo_contract_version: "4.1.1",
      rust_toolchain: "stable-x86_64-unknown-linux-gnu",
      wasm_opt_settings: {
        keep_debug_symbols: false,
        optimization_passes: "Z",
      },
    },
  },
  contract: {
    name: "hello_world",
    version: "0.1.0",
    authors: ["[your_name] <[your_email]>"],
  },
  image: null,
  spec: {
    constructors: [
      {
        args: [],
        default: false,
        docs: [
          "Constructor that initializes the `HelloMessage` struct with default values.",
        ],
        label: "default",
        payable: false,
        returnType: {
          displayName: ["ink_primitives", "ConstructorResult"],
          type: 6,
        },
        selector: "0xed4b9d1b",
      },
    ],
    docs: [],
    environment: {
      accountId: { displayName: ["AccountId"], type: 0 },
      balance: { displayName: ["Balance"], type: 11 },
      blockNumber: { displayName: ["BlockNumber"], type: 13 },
      chainExtension: { displayName: ["ChainExtension"], type: 14 },
      hash: { displayName: ["Hash"], type: 12 },
      maxEventTopics: 4,
      staticBufferSize: 16384,
      timestamp: { displayName: ["Timestamp"], type: 4 },
    },
    events: [],
    lang_error: { displayName: ["ink", "LangError"], type: 8 },
    messages: [
      {
        args: [],
        default: false,
        docs: [" A function that returns the current state of your contract."],
        label: "get",
        mutates: false,
        payable: false,
        returnType: { displayName: ["ink", "MessageResult"], type: 9 },
        selector: "0x2f865bd9",
      },
      {
        args: [
          { label: "new_message", type: { displayName: ["String"], type: 3 } },
        ],
        default: false,
        docs: [" A function that allows the caller to set a new message."],
        label: "set",
        mutates: true,
        payable: false,
        returnType: { displayName: ["ink", "MessageResult"], type: 6 },
        selector: "0xe8c45eb6",
      },
    ],
  },
  storage: {
    root: {
      layout: {
        struct: {
          fields: [
            { layout: { leaf: { key: "0x00000000", ty: 0 } }, name: "author" },
            { layout: { leaf: { key: "0x00000000", ty: 3 } }, name: "message" },
            { layout: { leaf: { key: "0x00000000", ty: 4 } }, name: "count" },
          ],
          name: "HelloMessage",
        },
      },
      root_key: "0x00000000",
      ty: 5,
    },
  },
  types: [
    {
      id: 0,
      type: {
        def: { composite: { fields: [{ type: 1, typeName: "[u8; 32]" }] } },
        path: ["ink_primitives", "types", "AccountId"],
      },
    },
    { id: 1, type: { def: { array: { len: 32, type: 2 } } } },
    { id: 2, type: { def: { primitive: "u8" } } },
    { id: 3, type: { def: { primitive: "str" } } },
    { id: 4, type: { def: { primitive: "u64" } } },
    {
      id: 5,
      type: {
        def: {
          composite: {
            fields: [
              {
                name: "author",
                type: 0,
                typeName:
                  "<AccountId as::ink::storage::traits::AutoStorableHint<::ink::\nstorage::traits::ManualKey<557343290u32, ()>,>>::Type",
              },
              {
                name: "message",
                type: 3,
                typeName:
                  "<String as::ink::storage::traits::AutoStorableHint<::ink::\nstorage::traits::ManualKey<1400876634u32, ()>,>>::Type",
              },
              {
                name: "count",
                type: 4,
                typeName:
                  "<u64 as::ink::storage::traits::AutoStorableHint<::ink::storage\n::traits::ManualKey<3860353161u32, ()>,>>::Type",
              },
            ],
          },
        },
        path: ["hello_world", "hello_world", "HelloMessage"],
      },
    },
    {
      id: 6,
      type: {
        def: {
          variant: {
            variants: [
              { fields: [{ type: 7 }], index: 0, name: "Ok" },
              { fields: [{ type: 8 }], index: 1, name: "Err" },
            ],
          },
        },
        params: [
          { name: "T", type: 7 },
          { name: "E", type: 8 },
        ],
        path: ["Result"],
      },
    },
    { id: 7, type: { def: { tuple: [] } } },
    {
      id: 8,
      type: {
        def: {
          variant: { variants: [{ index: 1, name: "CouldNotReadInput" }] },
        },
        path: ["ink_primitives", "LangError"],
      },
    },
    {
      id: 9,
      type: {
        def: {
          variant: {
            variants: [
              { fields: [{ type: 10 }], index: 0, name: "Ok" },
              { fields: [{ type: 8 }], index: 1, name: "Err" },
            ],
          },
        },
        params: [
          { name: "T", type: 10 },
          { name: "E", type: 8 },
        ],
        path: ["Result"],
      },
    },
    { id: 10, type: { def: { tuple: [0, 3, 4] } } },
    { id: 11, type: { def: { primitive: "u128" } } },
    {
      id: 12,
      type: {
        def: { composite: { fields: [{ type: 1, typeName: "[u8; 32]" }] } },
        path: ["ink_primitives", "types", "Hash"],
      },
    },
    { id: 13, type: { def: { primitive: "u32" } } },
    {
      id: 14,
      type: {
        def: { variant: {} },
        path: ["ink_env", "types", "NoChainExtension"],
      },
    },
  ],
  version: 5,
};

const DeployContractPage = () => {
  const [constructor, setConstructor] = useState("default");
  const { dedotClient, connectedAccounts, activeProvider } = useDedotProvider();
  const { mutate } = useDeployContract();

  const handleDeployContract = async () => {
    mutate({
      metadata: CONTRACT_TEST,
      constructor: "default",
    });
  };
  return (
    <div>
      <Button onClick={handleDeployContract}>Test</Button>
    </div>
  );
};

export default DeployContractPage;
